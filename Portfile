# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0
name                bob
version             1.0beta1
categories          science
platforms           darwin
maintainers         anjos \
                    idiap.ch:andre.anjos
description         Bob is a signal-processing and machine learning toolbox \
                    for Biometrics
long_description    Bob is a signal-processing and machine learning toolbox \
                    for Biometrics developed at the Idiap Research Institute, \
                    in Switzerland. The toolbox is written in a mix of Python \
                    and C++ and is designed to be both efficient and to \
                    reduce development time.
homepage            http://idiap.github.com/bob/
master_sites        http://www.idiap.ch/software/bob/releases/
checksums           rmd160  7bbfce4fecc2a8e1ca081169e70c1a298ab1b75a \
                    sha256  2829fcb7393bac85925090b286b1f9c3cd3fbbf8e7f35796ef4131322509aa53

depends_build       port:cmake \
                    port:llvm-gcc42

depends_lib         port:blitz \
                    port:ffmpeg \
                    port:matio \
                    port:imagemagick \
                    port:google-perftools \
                    port:hdf5-18 \
                    port:boost \
                    port:fftw-3 \
                    port:vlfeat \
                    port:libsvm

configure.args      -DCMAKE_BUILD_TYPE=Release -DBOB_VERSION=${version}

# Can only compile blitz/bob with llvm-gcc-4.2
if {${configure.compiler} == "clang"} {
    configure.compiler llvm-gcc-4.2
    ui_warn "Overriding default 'clang' compiler with llvm-gcc-4.2"
}

variant python25 conflicts python26 python27 description {Builds for python 2.5.} {
  depends_lib-append    port:python25 \
                        port:py25-numpy \
                        port:py25-matplotlib \
                        port:py25-argparse \
                        port:py25-scipy
  configure.python      ${prefix}/bin/python2.5
}

variant python26 conflicts python25 python27 description {Builds for python 2.6.} {
  depends_lib-append    port:python26 \
                        port:py26-numpy \
                        port:py26-matplotlib \
                        port:py26-sphinx \
                        port:py26-argparse \
                        port:py26-scipy
  configure.python      ${prefix}/bin/python2.6
}

variant python27 conflicts python25 python26 description {Builds for python 2.7.} {
  depends_lib-append    port:python27 \
                        port:py27-numpy \
                        port:py27-matplotlib \
                        port:py27-sphinx \
                        port:py27-argparse \
                        port:py27-scipy
  configure.python      ${prefix}/bin/python2.7
}

variant qt4 description {Compile Qt4 extensions.} {
  depends_lib-append          port:qt4-mac
}

variant opencv description {Compile OpenCV extensions.} {
  depends_lib-append          port:opencv
}

variant doc {Builds documentation.} {
  depends_build-append    port:dvipng \
                          port:doxygen \
                          port:texlive-latex

  if {${configure.python} == ${prefix}/bin/python2.5} {
    depends_build-apend   port:py25-sphinx
  }
  if {${configure.python} == ${prefix}/bin/python2.6} {
    depends_build-apend   port:py26-sphinx
  }
  if {${configure.python} == ${prefix}/bin/python2.7} {
    depends_build-apend   port:py27-sphinx
  }
}

universal_variant  no
default_variants   +qt4 +opencv +doc

# defines the python variant depending on the current default python version
